# F1 Engine Sound Extension

타이핑 속도를 기반으로 가상 F1 엔진 사운드를 재생하는 Chrome 확장 프로그램(MV3)입니다. 컨텐츠 스크립트에서 키 입력을 감지해 초당 타수(KPS)를 측정하고, 서비스 워커가 RPM/기어 상태를 계산하여 오프스크린 문서(Web Audio API)로 사운드를 제어합니다. 팝업과 옵션 페이지에서 ON/OFF, 볼륨, 민감도, 엔진 타입을 조절할 수 있습니다.

## 구조
- `manifest.json`: MV3 설정 및 권한 정의
- `background.js`: 엔진 상태 머신, 설정 동기화, 오프스크린 제어
- `content.js`: 키 입력 수집 및 KPS 계산
- `offscreen.html` / `offscreen.js`: Web Audio 합성 기반 엔진/변속음 재생
- `popup.html` / `popup.js`: 즉시 ON/OFF, 상태 확인, 볼륨 조절 UI
- `options.html` / `options.js`: 엔진 타입·기본 볼륨·민감도 설정 UI
- `assets/`: (선택) 테스트용 샘플·참고 파일 보관. 현재 버전은 합성 사운드를 사용하므로 필수 아님
- `icons/` (gitignore 처리): 사용자 제공 확장 아이콘을 보관하는 폴더

### 아이콘 파일 준비
- 저작권 문제가 없는 PNG/SVG 아이콘을 `icons/` 폴더에 추가하고, 필요 시 `manifest.json`의 `action.default_icon` 또는 `icons` 필드를 수정하세요.
- 저장소에는 기본 아이콘이 포함되지 않으며 `.gitignore`에 의해 추적되지 않습니다. 배포 전 반드시 로컬에서 아이콘을 추가해야 합니다.

### 합성 사운드
- 별도 오디오 파일 없이 Web Audio로 엔진/변속음을 합성합니다.
- 엔진 타입은 실린더 수, 파형, 필터 프로파일 조합으로 구분됩니다.
- 샘플 기반으로 바꾸려면 `offscreen.js`의 합성 로직을 교체하면 됩니다.

## 설치 및 테스트
1. Chrome 주소창에 `chrome://extensions` 입력 후 개발자 모드를 켭니다.
2. "압축 해제된 확장 프로그램을 로드"를 눌러 이 폴더를 선택합니다.
3. 아무 웹 페이지 텍스트 입력창에서 타이핑하여 엔진 사운드가 RPM/기어에 따라 변하는지 확인합니다.
4. 팝업에서 엔진 사운드를 켜고 끄거나, 현재 기어/RPM과 볼륨을 확인·조절합니다.
5. 옵션 페이지에서 엔진 타입, 기본 볼륨, 민감도를 조절한 뒤 저장합니다.

### 브랜치 동기화 팁
- 원격 `main`이 존재하는 경우, 작업 전 `git fetch origin` 후 `git merge origin/main` 또는 `git rebase origin/main`으로 최신 커밋을 받아 충돌을 예방하세요.
- 이 저장소는 기본적으로 작업 브랜치(`work`)를 사용하므로, 로컬에서 `main`을 생성했다면 동일한 최신 커밋을 가리키도록 맞춘 뒤 작업을 시작하면 병합 충돌을 줄일 수 있습니다.

## 향후 개선 아이디어
- 실제 F1 엔진 샘플(기어/ RPM 구간별 다중 샘플) 로딩 및 크로스페이드
- 변속 효과음, 백파이어 등 원샷 사운드 자산 추가
- 키 종류별 민감도/가중치 반영, 커브 편집 UI 제공
- RPM/기어 히스토리 그래프, 키보드 오실로스코프 등 HUD 제공
